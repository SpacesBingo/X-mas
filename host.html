<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Host controle â€“ X-Mas Bingo ðŸŽ„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    :root {


        --bg-main: #050b16;
        --bg-panel: #081724;
        --accent: #ff4b4b;
        --accent-soft: rgba(255, 75, 75, 0.25);
        --success: #00c878;
        --danger: #ff4b4b;
        --text-main: #ffffff;
        --text-soft: #a8b3c6;
    }

    * {
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
}


    body {
    margin: 0;
    padding: 16px;
    background: radial-gradient(circle at top, #122033 0%, #050b16 60%, #02040a 100%);
    color: var(--text-main);

    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}

    .panel {
    width: 100%;
    max-width: 1100px;
    margin: 40px auto 60px;

    background: var(--bg-panel);
    padding: 32px 24px 36px;
    border-radius: 26px;
    border: 2px solid var(--accent-soft);
    box-shadow: 0 25px 80px rgba(0,0,0,0.75);
}

    h1 {
        margin: 0;
        text-align: center;
        font-size: 1.6rem;
        margin-bottom: 4px;
    }
    .subtitle {
        text-align: center;
        font-size: 0.85rem;
        color: var(--text-soft);
        margin-bottom: 20px;
    }

    label { font-size: 0.85rem; color: var(--text-soft); }
    input, select {
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        background: #0005;
        border: 1px solid #ffffff22;
        color: var(--text-main);
        margin-top: 4px;
        margin-bottom: 12px;
    }

    select { cursor: pointer; }

    .card-id {
        margin-bottom: 10px;
        font-size: 0.9rem;
    }
    .card-id span {
        font-family: monospace;
        font-size: 1rem;
    }

    .number-grid {
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        gap: 4px;
        margin-top: 16px;
        margin-bottom: 18px;
    }

    .num {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 10px;
    cursor: pointer;
    color: #fff;

    height: 38px;          /* compact */
    line-height: 38px;     /* centreren (mag blijven naast flex) */
    font-size: 20px;       /* groter cijfer */
    padding: 0;            /* geen extra lucht */

    display: flex;
    align-items: center;
    justify-content: center;
}

    .num.selected {
        background: #00c878;
        border-color: #004422;
        color: #000;
        font-weight: 700;
    }

    .btn {
        background: linear-gradient(90deg, #ff4b4b, #ff8c3c);
        color: #fff;
        padding: 10px 16px;
        border-radius: 999px;
        border: none;
        font-size: 1rem;
        cursor: pointer;
        margin-bottom: 10px;
        width: 100%;
        font-weight: 600;
        box-shadow: 0 5px 20px rgba(0,0,0,0.5);
    }

    .result {
        margin-top: 8px;
        font-size: 0.95rem;
    }
    .ok { color: var(--success); }
    .fail { color: var(--danger); }

    .player-card {
        margin-top: 20px;
        padding: 14px;
        background: #0003;
        border: 1px solid #ffffff22;
        border-radius: 14px;
    }
    .player-card-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 6px;
        margin-top: 10px;
    }
    .cell {
        padding: 10px 0;
        background: rgba(255,255,255,0.07);
        border: 1px solid rgba(255,255,255,0.18);
        border-radius: 8px;
        text-align: center;
    }
    .cell.marked {
        background: #00c878;
        color: #000;
        font-weight: 700;
    }

    .footer {
        text-align: right;
        margin-top: 12px;
        font-size: 0.75rem;
        color: var(--text-soft);
    }

    .row-fields {
        display: flex;
        gap: 16px;
        margin-bottom: 20px;
}

    .field {
        flex: 1;
}
    
</style>

</head>
<body>

    <body>

<div class="panel">

    <h1>Host controle â€“ X-Mas Bingo ðŸŽ„</h1>
    <p class="subtitle">Controleer bingo op basis van @handle + ronde + getrokken nummers.</p>


    <!-- kaart-id / grid / etc -->

</div>

<div class="row-fields">

    <div class="field">
        <label>X @handle speler</label>
        <input id="player" placeholder="@naam">
    </div>

    <div class="field">
        <label>Ronde</label>
        <select id="round">
            <option>Ronde 1</option>
            <option>Ronde 2</option>
            <option>Ronde 3</option>
        </select>
    </div>

</div>

    <div class="card-id">Kaart-ID: <span id="cardId">â€“</span></div>

    <label>Klik nummers die getrokken zijn (1-75):</label>
    <div class="number-grid" id="numGrid"></div>

    <button class="btn" id="checkBtn">Controleer bingo</button>
<button class="btn" id="resetBtn" style="background:#444; margin-left:10px;">Reset getrokken nummers</button>


    <div id="result" class="result"></div>

    <div class="player-card">
        <strong>Kaart van speler</strong>
        <div id="playerGrid" class="player-card-grid"></div>
    </div>

    <div class="footer">Â© spacesbingo</div>

</div>


<script>

function resetSelections() {
    // 1. Reset alle geselecteerde nummers
    const grid = document.getElementById("numGrid");
    if (grid) {
        grid.querySelectorAll(".num.selected").forEach(btn => {
            btn.classList.remove("selected");
        });
    }

    // 2. Clear resultaat
    const result = document.getElementById("result");
    if (result) {
        result.textContent = "";
        result.className = "result";
    }

    // 3. Leeg getekende kaart
    const playerGrid = document.getElementById("playerGrid");
    if (playerGrid) {
        playerGrid.innerHTML = "";
    }
}


    
/* ---------------- RNG voor vaste kaart per speler ---------------- */
function cyrb128(str) {
    let h1 = 1779033703, h2 = 3144134277, h3 = 1013904242, h4 = 2773480762;
    for (let i = 0; i < str.length; i++) {
        let k = str.charCodeAt(i);
        h1 = h2 ^ Math.imul(h1 ^ k, 597399067);
        h2 = h3 ^ Math.imul(h2 ^ k, 2869860233);
        h3 = h4 ^ Math.imul(h3 ^ k, 951274213);
        h4 = h1 ^ Math.imul(h4 ^ k, 2716044179);
    }
    h1 = Math.imul(h3 ^ (h1>>>18), 597399067);
    h2 = Math.imul(h4 ^ (h2>>>22), 2869860233);
    h3 = Math.imul(h1 ^ (h3>>>17), 951274213);
    h4 = Math.imul(h2 ^ (h4>>>19), 2716044179);
    return [(h1^h2^h3^h4)>>>0];
}
function makeRng(seed){
    return function(){
        seed |= 0; seed = (seed + 0x6D2B79F5) | 0;
        let t = Math.imul(seed ^ seed>>>15, 1|seed);
        t = (t + Math.imul(t ^ t>>>7, 61|t)) ^ t;
        return ((t ^ t>>>14)>>>0) / 4294967296;
    }
}

function generateCard(handle, round) {
    handle = handle.replace("@","").toLowerCase();
    const [seed] = cyrb128(handle + "::" + round);
    const rng = makeRng(seed);

    const all = [...Array(75).keys()].map(n => n+1);
    for (let i = all.length - 1; i > 0; i--) {
        const j = Math.floor(rng() * (i + 1));
        [all[i], all[j]] = [all[j], all[i]];
    }
    return all.slice(0, 15).sort((a,b)=>a-b);
}

function generateCardID(handle){
    handle = handle.trim().toLowerCase();
    const [seed] = cyrb128(handle + "::card");
    return "SB-" + String(seed % 1000000).padStart(6,"0");
}

/* ---------- Host nummerkeuze ---------- */
const grid = document.getElementById("numGrid");
for (let i = 1; i <= 75; i++){
    const d = document.createElement("div");
    d.className = "num";
    d.textContent = i;
    d.onclick = () => d.classList.toggle("selected");
    grid.appendChild(d);
}

/* ---------- Bingo regels ---------- */
function checkBingo(cardNums, drawnNums, round) {
    const drawn = new Set(drawnNums);
    const rows = [
        cardNums.slice(0,5),
        cardNums.slice(5,10),
        cardNums.slice(10,15)
    ];

    const countLines = rows.filter(r => r.every(n => drawn.has(n))).length;
    const full = cardNums.every(n => drawn.has(n));

    if (round === 1) return { ok: countLines >= 1, lines: countLines, full };
    if (round === 2) return { ok: countLines >= 2, lines: countLines, full };
    if (round === 3) return { ok: full, lines: countLines, full };
}

/* ---------- Controleknop ---------- */
document.getElementById("checkBtn").onclick = () => {
    const handle = document.getElementById("handleInput").value.trim();
    const round = parseInt(document.getElementById("roundSelect").value);
    const resultBox = document.getElementById("result");

    if (!handle){
        resultBox.textContent = "Vul een @handle in.";
        resultBox.className = "result fail";
        return;
    }

    document.getElementById("cardId").textContent = generateCardID(handle);

    const selected = [...document.querySelectorAll(".num.selected")].map(n => parseInt(n.textContent));
    if (selected.length === 0){
        resultBox.textContent = "Selecteer getrokken nummers.";
        resultBox.className = "result fail";
        return;
    }

    const card = generateCard(handle, round);

    /* Render kaart */
    const pg = document.getElementById("playerGrid");
    pg.innerHTML = "";
    card.forEach(n => {
        const c = document.createElement("div");
        c.className = "cell" + (selected.includes(n) ? " marked" : "");
        c.textContent = n;
        pg.appendChild(c);
    });

    /* Bingo check */
    const { ok, lines, full } = checkBingo(card, selected, round);

    if (ok){
        if (full){
            resultBox.textContent = `âœ… VOLLE KAART voor ${handle} in ronde ${round}!`;
        } else if (round === 1){
            resultBox.textContent = `âœ… Bingo! (${lines} lijn)`;
        } else if (round === 2){
            resultBox.textContent = `âœ… Bingo! (${lines} lijnen)`;
        }
        resultBox.className = "result ok";
    } else {
        resultBox.textContent = "âŒ Geen geldige bingo.";
        resultBox.className = "result fail";
    }
};

    /* --- Reset-knop activeren --- */
document.getElementById("resetBtn").onclick = () => {
    resetSelections();
};


/* --- Automatisch resetten bij veranderen van ronde --- */
document.getElementById("roundSelect").addEventListener("change", () => {
    resetSelections();
});


    
</script>

</body>
</html>
